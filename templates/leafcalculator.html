{% extends "base.html" %}
{% block title %}Leaf Evaluator - ScALe{% endblock %}

{% block content %}
<section class="calculator-section">
  <h2>Leaf Evaluator</h2>
  
  <div class="notes-section">
    <h3>Measurement Guidelines:</h3>
    <ul class="notes-list">
      <li>📏 Use a 15 cm scale for small leaves and a 30 cm scale for large leaves as a reference object.</li>
      <li>🌿 Place the leaf and reference object side by side on a white background with some space in between.</li>
      <li>🖌️ Use the Paint app on your computer to measure the Reference Object Pixel Length.</li>
      <li>🌥️ Avoid shadows while capturing the image.</li>
      <li>📱 Use a document scanner app for better clarity.</li>
    </ul>
  </div>

  <form method="POST" enctype="multipart/form-data" class="upload-form">
    <label for="leaf_image">Upload Leaf Image:</label>
    <input type="file" name="leaf_image" id="leaf_image" accept="image/*" required>
    
    <label for="reference_length_cm">Reference Object Length (cm):</label>
    <input type="number" step="0.01" name="reference_length_cm" id="reference_length_cm" required>
    
    <label for="reference_pixel_length">Reference Object Pixel Length:</label>
    <input type="number" step="0.01" name="reference_pixel_length" id="reference_pixel_length" required>
    
    <button type="submit">Calculate</button>
  </form>

  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}

  {% if image_path %}
  <div class="result-section">
    <h3>Results</h3>
    <img src="{{ url_for('static', filename=image_path.split('static/')[-1]) }}" alt="Uploaded Leaf" class="result-image">
    <p><strong>Leaf Area:</strong> {{ area }} cm²</p>
    <p><strong>Leaf Length:</strong> {{ length }} cm</p>
    <p><strong>Leaf Width:</strong> {{ width }} cm</p>
  </div>
  {% endif %}
</section>
{% endblock %}